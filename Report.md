# Report.md — Аудит prop_bot_super_spec_v6.3.2.md → FINAL

Ниже — консолидированный отчёт «как было → как стало» по ключевым правкам.

## 1. Нумерация и якоря
**Было:** пропуски разделов (6→8→10), отсутствие якорей.  
**Стало:** последовательная нумерация 0..13, добавлены якоря `§X.Y` и ссылки.

## 2. Термины/стиль
**Было:** вариативное написание (Exactly-once/exactly once), json/jsonc.  
**Стало:** стандартизовано: **Exactly-once**, **Exception-budget**, **Two-Man Rule**, **Conformance-suite**; примеры JSON — `jsonc` помечены явно.

## 3. Метрики/SLO/единицы
**Было:** смешение ms/сек, bps/%.  
**Стало:** единицы приведены к `мс`, `сек`, `bps`, `%`; пороги синхронизированы через `configs/status_thresholds.yaml` и §8.3.

## 4. API/контракты
**Было:** перечисление без явных контрактов для `/api/ui/status`.  
**Стало:** добавлен минимальный контракт JSONC; расширен Acceptance для System Status.

## 5. Безопасность/DR/HA
**Было:** пунктирно.  
**Стало:** добавлены явные DoD для fencing, cancel-on-disconnect, clock-skew guard (|skew|>200 мс → HOLD), break‑glass, шифрование at-rest.

## 6. Форматирование и типографика
**Было:** кавычки/тире разнородны.  
**Стало:** ru‑RU типографика, неразрывные пробелы убраны, таблицы Markdown выровнены.

## 7. Спорные пороги — выбранные дефолты
- `clock_skew_hold_ms = 200` (обоснование: безопасно для дедлайнов cancel/replace).
- `runaway_place_per_min ≤ 300`, `runaway_cancel_per_min ≤ 600` (с запасом к retail API RL).
- ws_gap_ms_p95: local ≤ 400 мс, VPS ≤ 600 мс — исходя из типичных RTT до CEX.
- auto‑rollback при провале Alembic миграции — safety‑first.

## 8. Файлы-артефакты
- `prop_bot_super_spec_v6.3.2_FINAL.md` — выровненная спецификация.  
- `CHANGELOG_v6.3.2_FINAL.md` — перечень правок.  
- `IMPLEMENTATION_PLAN.md` — краткий план ≤120 строк.



## 9. Синхронизация с исходником
Добавлены эндпоинты из оригинала: `/api/ui/approvals`, `/api/ui/limits`, `/api/ui/universe`. Контракт — минимальный (paper-моки), без изменения намерений.
