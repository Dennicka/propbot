# PropBot production deployment template.
# Сначала запускай с DRY_RUN_MODE=true и в HOLD. Никогда не включай live-трейдинг
# без ручного двухшагового resume-confirm и проверки лимитов.

# --- Container image reference (ghcr.io/${REPO}/propbot:${TAG}) ---
# Укажи организацию/namespace в GHCR и тег образа для docker-compose.prod.yml.
REPO=your-ghcr-namespace
TAG=main

# --- Runtime profile & safety guards ---
PROFILE=paper                     # Профиль обмена: paper/testnet/live (start with paper)
MODE=prod                         # Отметка окружения, отображается в статусе
SAFE_MODE=true                    # Блокирует размещение реальных ордеров
DRY_RUN_ONLY=true                 # Принудительно использует симулятор заявок
DRY_RUN_MODE=true                 # Имитирует исполнение хеджа без реальных ордеров (первый запуск всегда так)
TWO_MAN_RULE=true                 # Требует подтверждение второго оператора
POST_ONLY=true                    # Выставляет только post-only заявки
REDUCE_ONLY=false                 # Ограничивает заявки закрытием позиций
ENABLE_PLACE_TEST_ORDERS=false    # Разрешить тестнет ордера (включать только для тестов)
ORDER_NOTIONAL_USDT=50            # Базовый размер цикла (USDT)
MAX_SLIPPAGE_BPS=2                # Допустимый слиппедж (bps)
MIN_SPREAD_BPS=0.0                # Минимальный спрэд для сделки
POLL_INTERVAL_SEC=5               # Интервал цикла (сек)
LOOP_PAIR=                        # Необязательная пара для фиксации цикла (например BTCUSDT)
LOOP_VENUES=                      # Необязательные биржи для цикла (через запятую)

# --- Risk limits ---
MAX_POSITION_USDT=25000           # Лимит позиции по умолчанию (USDT)
MAX_OPEN_ORDERS=5                 # Максимум открытых заявок
MAX_DAILY_LOSS_USDT=2500          # Суточный стоп по убытку (USDT)
MAX_ORDERS_PER_MIN=300            # Runaway limiter для размещённых ордеров в минуту
MAX_CANCELS_PER_MIN=600           # Runaway limiter для отмен в минуту

# --- Cross-exchange hedging ---
AUTO_HEDGE_ENABLED=false          # Авто-хедж демон (включать осознанно)
AUTO_HEDGE_SCAN_SECS=2            # Интервал сканирования (сек)
MAX_OPEN_POSITIONS=3              # Максимум открытых хедж-позиций
MAX_NOTIONAL_PER_POSITION_USDT=25000  # Лимит ноционала на позицию (USDT)
MAX_TOTAL_NOTIONAL_USDT=75000     # Совокупный лимит ноционала (USDT)
MAX_LEVERAGE=5                    # Максимальное плечо
SCAN_INTERVAL_SEC=5               # Интервал поиска возможностей (сек)
SCAN_LEVERAGE_SUGGESTION=1.0      # Предлагаемое плечо в отчётах

# --- Authentication & approvals ---
AUTH_ENABLED=true                 # Требует API_TOKEN для защищённых ручек
API_TOKEN=change-me               # Bearer-токен для /api/ui/* и CLI
APPROVE_TOKEN=                    # Токен подтверждения второго оператора для resume-confirm
IDEM_TTL_SEC=600                  # TTL кэша идемпотентности (сек)
API_RATE_PER_MIN=30               # Пополнение токенов rate-limit (шт/мин)
API_BURST=10                      # Размер burst для rate-limit

# --- Persistence paths ---
RUNTIME_STATE_PATH=./data/runtime_state.json      # Снапшот управляющего состояния
POSITIONS_STORE_PATH=./data/hedge_positions.json  # Журнал хедж-позиций
HEDGE_LOG_PATH=./data/hedge_log.json              # Лог авто-хеджа
OPS_ALERTS_FILE=./data/ops_alerts.json            # Локальный журнал алертов
OPS_ALERTS_MAX_RECORDS=500                        # Сколько алертов хранить на диске

# --- Telegram control bot ---
TELEGRAM_ENABLE=false             # Включить оповещения в Telegram
TELEGRAM_BOT_TOKEN=               # Токен бота из @BotFather
TELEGRAM_CHAT_ID=                 # Разрешённый chat/user ID для команд
TELEGRAM_PUSH_MINUTES=5           # Интервал автоматических статусов (мин)

# --- Binance & OKX credentials ---
BINANCE_UM_API_KEY_TESTNET=       # Ключ Binance UM testnet (для безопасных тестов)
BINANCE_UM_API_SECRET_TESTNET=    # Секрет Binance UM testnet
BINANCE_UM_BASE_TESTNET=https://testnet.binancefuture.com  # Опциональный override testnet URL
BINANCE_LV_API_KEY=               # Ключ Binance Futures live (хранить безопасно)
BINANCE_LV_API_SECRET=            # Секрет Binance Futures live
BINANCE_API_KEY=                  # Ключ Binance USDⓈ-M для хеджа
BINANCE_API_SECRET=               # Секрет Binance USDⓈ-M для хеджа
BINANCE_FUTURES_API_URL=https://fapi.binance.com  # Опциональный override REST URL
OKX_API_KEY_TESTNET=              # Ключ OKX testnet (для безопасных тестов)
OKX_API_SECRET_TESTNET=           # Секрет OKX testnet
OKX_API_PASSPHRASE_TESTNET=       # Пароль OKX testnet
OKX_API_KEY=                      # Ключ OKX для перпетуалов (боевой)
OKX_API_SECRET=                   # Секрет OKX
OKX_API_PASSPHRASE=               # Пароль OKX
OKX_FUTURES_API_URL=https://www.okx.com  # Опциональный override REST URL

# --- Misc ---
POSTGRES_DSN=                     # Если используется внешняя БД (иначе оставить пустым)
